{% extends 'base.html' %}

{% block title %}Редактировать {{ client.name }} — Freelance CRM{% endblock %}

{% block content %}

<!--Height limit for fillable fields-->
<style>
    textarea {
        resize: vertical;
        max-height: 200px;
        min-height: 100px;
    }
</style>

<div class="max-w-2xl mx-auto py-8">
    <h1 class="text-2xl font-bold mb-6">Редактировать клиента: {{ client.name }}</h1>

    <form method="post" class="space-y-6">
        {% csrf_token %}

        <div>
            <label class="block text-sm font-medium text-gray-700">Имя / Компания</label>
            <div class="mt-1">
                {{ form.name }}
            </div>
            {% if form.name.errors %}
            <p class="mt-1 text-sm text-red-600">{{ form.name.errors|join:" " }}</p>
            {% endif %}
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Email</label>
            <div class="mt-1">
                {{ form.email }}
            </div>
            {% if form.email.errors %}
            <p class="mt-1 text-sm text-red-600">{{ form.email.errors|join:" " }}</p>
            {% endif %}
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Телефон</label>
            <div class="mt-1">
                {{ form.phone }}
            </div>
            {% if form.phone.errors %}
            <p class="mt-1 text-sm text-red-600">{{ form.phone.errors|join:" " }}</p>
            {% endif %}
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700">Заметки</label>
            <div class="mt-1">
                {{ form.notes }}
            </div>
            {% if form.notes.errors %}
            <p class="mt-1 text-sm text-red-600">{{ form.notes.errors|join:" " }}</p>
            {% endif %}
        </div>

        <div>
            <label class="block text-sm font-medium text-gray-700 flex items-center gap-2">
                <svg class="w-4 h-4 text-sky-500" fill="currentColor" viewBox="0 0 24 24">
                    <path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm4.64 6.8c-.15 1.58-.8 5.42-1.13 7.19-.14.75-.42 1-.68 1.03-.58.05-1.02-.38-1.58-.75-.88-.58-1.38-.94-2.23-1.5-.99-.65-.35-1.01.22-1.59.15-.15 2.71-2.48 2.76-2.69a.2.2 0 00-.05-.18c-.06-.05-.14-.03-.21-.02-.09.02-1.49.95-4.22 2.79-.4.27-.76.41-1.08.4-.36-.01-1.04-.2-1.55-.37-.63-.2-1.12-.31-1.08-.66.02-.18.27-.36.74-.55 2.92-1.27 4.86-2.11 5.83-2.51 2.78-1.16 3.35-1.36 3.73-1.36.08 0 .27.02.39.12.1.08.13.19.14.27-.01.06.01.24 0 .38z"/>
                </svg>
                Telegram Chat ID
            </label>
            <div class="mt-1">
                {{ form.telegram_chat_id }}
            </div>
            {% if form.telegram_chat_id.errors %}
            <p class="mt-1 text-sm text-red-600">{{ form.telegram_chat_id.errors|join:" " }}</p>
            {% endif %}
        </div>

        <div class="flex justify-between items-center mt-8">
            <a href="{% url 'clients:detail' client.pk %}"
               class="inline-flex items-center gap-2 font-medium bg-blue-400 text-white px-6 py-2 rounded hover:bg-blue-700 transition">
                ← Назад к профилю
            </a>

            <button type="submit"
                    class="bg-blue-600 text-white px-6 py-2 rounded hover:bg-blue-700 transition">
                Сохранить изменения
            </button>
        </div>
    </form>
</div>
{% endblock %}